- model_class = Source

%h3
  = category_icon(@source)
  = @source.name

%p
  = @source.description

- if @source.link.present?
  %p
    %i.fa.fa-link
      = link_to @source.link, @source.link


= link_to t('.edit', :default => t("helpers.links.edit")), edit_source_path(@source), :class => 'btn btn-default'
= link_to t('.destroy', :default => t("helpers.links.destroy")), source_path(@source), :method => "delete", :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) }, :class => 'btn btn-default'

= link_to 'Add table of contents', new_toc_source_path(@source), :class => 'btn btn-default'


- for t in @source.toc.descendants.includes(:outline)
  = content_tag("h#{t.depth}", t.name) do
    = link_to t.name, t
  - if t.outline
    %p= t.outline.content

= render partial: 'events/editor', locals: {events: @source.events}

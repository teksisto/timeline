= form_for @quote, html: { class: "form form-horizontal quote" } do |f|
  .form-group
    = f.label :label, class: 'control-label'
    .controls
      = f.text_field :label, class: 'form-control', required: true
    = error_span(@quote[:label])
      
  -# .form-group
  -#   = f.label :source_id, class: 'control-label'
  -#   .controls
  -#     = f.select :source_id,
  -#       options_from_collection_for_select(Source.all, 'id', 'label', @quote.source_id),
  -#       {include_blank: true},
  -#       {class: 'form-control'}
  -#   = error_span(@quote[:source_id])

  #quote_source.well
    #quote_source_toggler
      %strong= 'Source'
    #quote_source_fields.fields-for
      = f.fields_for @quote.source do |source|
        = render partial: 'sources/fields', locals: {f: source}
    
  #quote_versions.well
    #quote_versions_toggler
      %strong= 'Versions'
    #quote_versions_fields.fields-for
      = f.fields_for :quote_versions do |version|
        = render partial: 'quote_version_fields', locals: {f: version}
      .links
        = link_to_add_association 'Add version', f, :quote_versions, class: 'btn btn-default btn-xs'

  %hr
  
  = f.submit nil,class: 'btn btn-primary'
  = link_to t('.cancel', :default => t("helpers.links.cancel")), quotes_path, :class => 'btn btn-default'

:javascript
  $("#quote_source_toggler").click(function (){
    $("#quote_source_fields").toggle();
  })

  $("#quote_versions_toggler").click(function (){
    $("#quote_versions_fields").toggle();
  })

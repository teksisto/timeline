#+TODO: ADD FIX REF ERR | DONE

* Сделать
** DONE Отображение таймлайна с категориями
** DONE Фильтр по источникам
** DONE Фильтр по категориям
** DONE Починить группировку по годам
** DONE Категории для источников
** DONE Фильтр по категориям событиях - добавить optgroup
** DONE Добавить корневые категории для событий и источников
** DONE Переверстать фильтры - сделать категории вертикальными
** DONE Добавление события в множество категорий
** DONE select2 для категорий
** DONE Добавление даты как интервала
** DONE Обратный отсчет
** DONE Убрать Toc, прикрутить все к Source
** FIX Ошибка когда в категории нет событий
   Воспроизводится только в тестах.
** FIX item[type=background] игнорирует height
** FIX Уменьшение размера цитат в презентациях
** REF Переименовать Source в Section
** REF Перенести events/fullscreen/vis в events/vis
** REF Сделать layouts/empty
** ADD Добавление комментариев к конспектам
** ADD Событие: множество цитат, множество категорий
** ADD Человек: множество цитат, множество событий, множество категорий
** ADD events/filter - не группировать по странам
** ADD При добавлении потусов добавлять Person
** ADD Маркдаун для описаний
** ADD При добавлении в категорию, событие попадает по все родительские
** ADD Объединить в категориях поля значок и цвет
** ADD Фильтр по источникам в событиях - добавить иконки
** ADD Картинки для источников
** ADD Прикрутить авторизацию
** ADD Добавить для пользователя настройку "тема"
** ADD Добавить для пользователя настройку "язык"

* Подумать
** Блочный текстовый редактор
*** Как поймать enter?
   Похоже самым простым способом будет множество тексовых полей, у
   которых на enter висит добавить новое поле после текущего.

   Как поймать enter:

   : <form name="chatline" ... >
   :   <input type="text" />
   :   <input type="submit" />
   : </form>
   :    
   : $("form").submit(function() {
   :   //there you go, you caught your enter
   : });
*** Как сгенерировать uuid?

   Для текстовых полей наверное надо будет генерить идешники. Как-то так:

   : var uuid = guid();

*** Как сделать это по-простому?

    Лоскутное одеяло из партиалов. Есть кнопки: добавить параграф,
    добавить цитату. При нажатии уходит ajax-запрос, который
    возвращает куски формы. Таким образом набивается форма. 

    Между блоками можно вставить тот же самый набор кнопок, только
    скрывающийся до полоски. Навел мышку на полоску -- увидел полный
    набор кнопок.

*** Причем здесь nested_form?

    Очень может быть, что причем.

** Импорт html
   
   And finally, the “Hello World” of e-books, Alice's Adventures In Wonderland

   : repub -x 'title:body/h1' -x 'toc://table' -x 'toc_item://tr' -X '//pre' -X '//hr' -X '//body/h4' \
   : http://www.gutenberg.org/files/11/11-h/11-h.htm

   eeepub выдает ошибку при генерации примера и не указывает в гемспеке, что хочет библиотеку zip

** Цветовая схема
*** Отображение цветов при выборе двух категорий
*** Автоматическая генерация нового приятного цвета
*** Отображение таймлайна со смешиванием цветов
